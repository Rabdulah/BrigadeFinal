<div class="masthead segment bg2">
  <div class="ui container">
    <div class="introduction">
      <h1 class="ui inverted header">
        <span class="library" style="font-size: 1.25em">{{model.givenName}} {{model.familyName}}</span>
      </h1>

    </div>
  </div>
</div>

<div class="ui container" style="padding-top: 2em">
  <div class="ui top attached tabular stackable menu" style="padding-left: 15%;">

    <a class="{{assessState}} item" {{action "assessView"}}>
      Assessment
    </a>
    <a class="item">
      Notes
    </a>
    <a class="{{reportState}} item"  {{action "reportView"}}>
      Reports
    </a>
    <a class="{{photoState}} item"  {{action "photoView"}}>
      Photos
    </a>
    <a class="{{menusState}} item" {{action "menusView"}}>
      Menus
    </a>
    <a class="item">
      Documents
    </a>
    <a class="{{accountingState}} item" {{action "accountingView"}}>
      Accounting
    </a>
  </div>
  <div class="ui segment" style="background: transparent;border: none;box-shadow: none;">

    {{#if menus}}

    <div class="ui very padded container segment" id="top">
      <div class="ui grid" style="margin-top: -30px;">
        <div class="left twelve wide column" style="margin-top: -5px;">
          <p style="padding-top: 13px;color:  white;font-size: 1.5em;font-weight: bolder;">
            Menu Builder
          </p>
        </div>
        <div class="right three wide column" style="padding-left: 30px;">
          {{!--{{add-rehabplan flagAdd=flagAdd}}--}}
          <div class="ui form" >
            {{#ui-dropdown class="selection" onChange=(action (mut plan))}}
              <div class="default text">Select a menu</div>
              <i class="dropdown icon"></i>
              <div class="menu">
                {{#each rehabModel as |plan|}}
                  <div data-value="{{plan.id}}" class="item">
                    {{plan.planName}}
                  </div>
                {{/each}}
              </div>
            {{/ui-dropdown}}

          </div>
        </div>
      </div>
      <br><br><br><br>
      <div style="display: inline">
        <table class="ui fixed table" style="border: none;border-color: white;">
          <tbody >
          <tr style="font-weight: bold;">
            {{#each modelAttributes as |column|}}
              <th class={{column.class}} {{action 'sortColumn' column.key column.dir}}>{{column.name}}
                {{#if (eq column.dir 'asc')}}
                  <i class="sort ascending icon"></i>
                {{/if}}
                {{#if (eq column.dir 'desc')}}
                  <i class="sort descending icon"></i>
                {{/if}}
                {{#if (eq column.dir '')}}
                  <i class="sort icon"></i>
                {{/if}}
              </th>
            {{/each}}

          </tr>
          </tbody>
        </table>
      </div>

      <div class="ui divider"></div>

      <div  id="myWindow" style="height:500px; overflow-y: scroll; overflow-x: hidden;">
        <table class="ui fixed table" id="tb" style="margin: 0 0;border: none;">
          <tbody >
          {{#each listModel as |exercise|}}

            <tr>

              {{#each modelAttributes as |column|}}

                <td class={{column.class}}>
                  {{get exercise column.key}}
                </td>
              {{/each}}
            </tr>
          {{/each}}

          {{#if isPlanSelected}}
            <div class="ui {{disabled}} button" {{action "openModal"}}>
              Assign
            </div>
          {{/if}}


          </tbody>
        </table>
      </div>
    </div>
    {{/if}}

    {{#if photo}}
      <table class="ui single line table">
    <thead>
    <tr>
      <th>Image Name</th>
      <th>Image</th>
    </tr>
    </thead>

    <tbody>
    {{#each imageList as |Image|}}
      <tr>
        <td>{{Image.name}}</td>
        <td>
          <img class = "ui extra large image" src="{{Image.imageData}}">
        </td>
      </tr>
    {{/each}}
    </tbody>

  </table>
    {{/if}}




    {{#if reports}}

<div class="ui very padded container segment" id="top">
      <div class="ui grid" style="margin-top: -30px;">
        <div class="left twelve wide column" style="margin-top: -5px;">
          <p style="padding-top: 13px;color:  white;font-size: 1.5em;font-weight: bolder;">
            Reports
          </p>
        </div>
        <div class="right three wide column" style="padding-left: 30px;">
          {{!-- <div class="ui form" >
            <button class="ui small blue labeled icon button">
              <i class="file alternate icon"></i>
              Generate Reports
            </button>
          </div> --}}
        </div>
      </div>
      <br><br><br><br>

      <div style="display: inline">
        <table class="ui fixed table" style="border: none;border-color: white;">
          <tbody >
          <tr style="font-weight: bold;">
        <th class>
          Report Type
        </th>
        <th class>
          Actions
        </th>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="ui divider"></div>

      <div style="display: inline">
        <table class="ui fixed table" style="border: none;border-color: white;">
          <tbody>
            <tr>
              <th class>
                Feedback Report
              </th>
              <th class>
                <button class="circular ui icon button" {{action "openFeedback"}}>
                  <i class="file alternate icon"></i>
                </button>
              </th>
            </tr>

            <br><br>
             <tr>
              <th class>
                Summary Report
              </th>
              <th class>
                <button class="circular ui icon button" {{action "openSummary"}}>
                  <i class="file alternate icon"></i>
                </button>
              </th>
            </tr>

            <br><br>
             <tr>
              <th class>
                Data Report
              </th>
              <th class>
                <button class="circular ui icon button" {{action "openData"}}>
                  <i class="file alternate icon"></i>
                </button>
              </th>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
    {{/if}}
    {{#if accountingmenus}}
      <div class="ui very padded container segment" id="top">
        <div class="ui grid" style="margin-top: -30px;">
          <div class="left five wide column" style="margin-top: -5px;">
            <p style="padding-top: 13px;color:  white;font-size: 1.5em;font-weight: bolder;">Trasnactions</p>
          </div>
          <div class="right three wide column" style="padding-left: 30px; margin-top: -5px;">
            <p>remaining: </p>
          </div>
          <td class="right aligned one wide column ">
            <p style="cursor: pointer; " title="Edit">
              <img src="/assets/images/pencil.svg">
            </p>
          </td>

        </div>
        <br><br><br><br>


        <div style="display: inline">
          <table class="ui fixed table" style="border: none;border-color: white;">
            <tbody >
            <tr style="font-weight: bold;">
              <th> test </th>
              <th> test2 </th>
            </tr>
            </tbody>
          </table>
        </div>

        <div class="ui divider"></div>

        <div  id="myWindow" style="height:500px; overflow-y: scroll; overflow-x: hidden;">
          <table class="ui fixed table" id="tb" style="margin: 0 0;border: none;">
            <tbody >
            {{#each listModel as |exercise|}}


              <tr>

                {{#each modelAttributes as |column|}}

                  <td class={{column.class}}>
                    {{get exercise column.key}}
                  </td>
                {{/each}}
              </tr>
            {{/each}}

            {{#if isPlanSelected}}
              <div class="ui {{disabled}} button" {{action "openModal"}}>
                Assign
              </div>
            {{/if}}


            </tbody>
          </table>
        </div>

      </div>
    {{/if}}

    {{#if assess}}
      {{assessment-table model=model}}
    {{/if}}

  </div>
</div>
  <br><br><br><br>

{{#ui-modal name=modalName class=modalName }}
  <i class="close icon"></i>
  <link integrity="" rel="stylesheet" href="/assets/css/form-style.css"> <!-- Resource style -->

  <div class="ui icon header">
    Assign {{plansData.planName}}
  </div>
  <div class="content">
    <p>Are you sure you want to assign this rehabilitation plan?</p>
  </div>
  <br>
  {{list-forms rehabPlan = plan patient = model}}
  <div class="actions" style="padding:0">

    <div class="ok " style="padding:.6em; float:left; width: 50%; cursor: pointer; background: #35a785; color:white; text-align: center;">Yes</div>
    <div class="cancel " style="padding:.6em; float:left; width: 50%;  cursor: pointer; background: #b6bece; color:white; text-align: center;">No</div>
  </div>
{{/ui-modal}}

{{#ui-modal name="feedback" class="feedback"}}
  <i class="close icon"></i>
  {{!-- <link integrity="" rel="stylesheet" href="/assets/css/form-style.css"> <!-- Resource style --> --}}
  <label class="text"></label>
  <br>
  <div class="ui form">
    <div class="field">
      <label>Summarise examination findings: </label>
      <textarea></textarea>
      <br><br><br>
      <label>Summarise treatment plan: </label>
      <textarea></textarea>
    </div>
  </div>
  <br>

  <div class="actions" style="padding:0">

    <div class="ok" style="padding:.6em; float:left; width: 50%; cursor: pointer; background: #35a785; color:white; text-align: center;">Save Report</div>
    <div class="cancel" style="padding:.6em; float:left; width: 50%;  cursor: pointer; background: #b6bece; color:white; text-align: center;">Exit</div>
  </div>

{{/ui-modal}}

{{#ui-modal name="summary" class="summary"}}
  <i class="close icon"></i>
  {{!-- <link integrity="" rel="stylesheet" href="/assets/css/form-style.css"> <!-- Resource style --> --}}
  <label class="text"></label>
  <br>
  <div class="ui form">
    <div class="field">

      <label class="header">Patient information:</label>
      <br>
      <label>Name: {{model.givenName}} {{model.familyName}}</label>
      <label>Date of birth: {{model.dateOfBirth}}</label>
      <label>Gender: {{model.gender}}</label>
      <label>Address: {{model.streetNumber}} {{model.streetName}} #{{model.apartment}}, {{model.postalCode}}  {{model.city}}, {{model.province}}, {{model.country}} </label>
      <label>Email: {{model.email}}</label>
      <label>Phone: {{model.phoneNumber}}</label>
      <br>

      <label class="header">Diagnosed case:</label>
      <label>Injury: </label>

      <br>

      <label class="header">Treatments:</label>
      {{#each patientModel as |link|}}
        <label>{{link.RehabilitationPlan.planName}}</label>
      {{/each}}

      <br>

      <label class="header">Appointment history:</label>
      {{appointmentModel}}
      {{#each appointments as |app|}}
        <label>{{app.reason}} {{app.date}} {{app.endDate}}</label>
      {{/each}}
      <br>

      <label class="header">Payment history:</label>
      {{#each model.transactions as |transaction|}}
        <label>Package #{{transaction.package}}, Date: {{transaction.date}}, Price: ${{transaction.amount}}</label>
      {{/each}}

      <br><br><br>

      <label>Final outcomes: </label>
      <textarea></textarea>
    </div>
  </div>
  <br>

  <div class="actions" style="padding:0">

    <div class="ok" style="padding:.6em; float:left; width: 50%; cursor: pointer; background: #35a785; color:white; text-align: center;">Save Report</div>
    <div class="cancel" style="padding:.6em; float:left; width: 50%;  cursor: pointer; background: #b6bece; color:white; text-align: center;">Exit</div>
  </div>

{{/ui-modal}}

{{#ui-modal name="data" class="data"}}
  <i class="close icon"></i>
  <label>Questions:</label> <br>
  {{questionModel}}
  {{#each ratingQuestions as |q|}}
    <label>{{q.questionText}}</label> 
    {{display-data-report question = q}}<br> 
  {{/each}}

  <div class="actions" style="padding:0">

    {{!-- <div class="ok" style="padding:.6em; float:left; width: 50%; cursor: pointer; background: #35a785; color:white; text-align: center;">Save Report</div> --}}
    <div class="cancel" style="padding:.6em; float:left; width: 100%;  cursor: pointer; background: #b6bece; color:white; text-align: center;">Exit</div>
  </div>

  {{/ui-modal}}